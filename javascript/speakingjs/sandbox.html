<html>
  <body>
    <script>

function print() {
  console.log.apply(console, arguments);
}

function applier(f, n) {
  return f(n);
}

console.log(applier(function (x) { return x * x; }, 9));

function f(x) {
  return x * x;
}

function makeIncrementor(start) {
  return function () {
    start++;
    return start;
  }
}

var inc = makeIncrementor(5);

print(f());

function accumulate(combiner, nullValue, l) {
  if (l.length == 0) {
    return nullValue;
  }
  var first = l.shift();
  return combiner(first, accumulate(combiner, nullValue, l));
}

function sumOfSquares(lst) {
  // return accumulate(function(), 1, lst.slice(1));  // phail
  return accumulate(function(first, rest) { return first * first + rest}, 0, lst);
}

var pushedInt = [];
var pushedFnResult = [];
for (var i = 0; i < 5; i++) {
  pushedInt.push(i);
  pushedFnResult.push(function () { return i });
}
print(pushedInt);
print(pushedFnResult[2]());

var resultIIFE = [];
for (var i = 0; i < 5; i++) {
  (function () {
    var i2 = i;
    resultIIFE.push(function () { return i2; });
  }());
}

var resultIIFE2 = [];
for (var i = 0; i < 5; i++) {
  (function (i) {
    resultIIFE2.push(function () { return i*i; });
  }(i));
}
// print(resultIIFE2[4]());

"some comment"

// print("after comment")

var x = 10;
if (x > 5) { 
  switch (x) {
  case 5 + 5:
    print("switch ok");
    break;
  default:
    print("no go");
  }
}

var globalId = 0

function idLog(x) {
  var result = 0;
  try {
    console.log(x);
    print(globalId);
    return result;
  } finally {
    result += 1;
    globalId += 1;
    console.log("FINALLY" + globalId);
  }
}

var setValue = function () {
  var prevValue;
  return function (value) {
    if (value !== prevValue) {
      console.log('Changed: ' + value);
      prevValue = value;
    }
  };
}();

function myFunction(myParam) {
  var myVar = 123;
  return myFloat;
}
var myFloat = 1.255;
print(myFunction('abc'));

var base = 1000;
function createInc(startValue) {
  return function(step) {
    startValue += step;
    return startValue + base;
  };
}
var inc = createInc(5);
print(inc(2));

function f() {
  var result = [];
  for (var i = 0; i < 3; i++) {
    (function (i) {
      //var pos = i;
      var func = function () {
        return i + 10;
      };
      result.push(func);
    }(i));
  }
  return result;
}
console.log(f()[2]());  // 2

var name = "the global name";
var jane = {
  name: 'Jane',
  sayHelloTo: function (otherName) {
    'use strict';
    name: 'the sayHelloFunction',
    console.log(this.name + ' says hello to ' + otherName);
  },
  sayGoodbye: function (obj) {
    console.log(obj.name + " says bye");
  }
};

function returnThis() { return this; }

var obj = { method: returnThis };

jane.sayHelloTo.call(this, 'Tarzan');
jane.sayGoodbye(this);

function func() {
  console.log('this: '+this);
  console.log('arguments: '+Array.prototype.slice.call(arguments));
}
var bound = func.bind('abcde', 1, 2);
    </script></body></html>
